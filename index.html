<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Valentine26 KS â¤ï¸</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/logo.png">
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js"></script>
</head>

<body>

<div class="progress">
    <span id="current-slide">1</span> / <span id="total-slides">11</span>
</div>

<button class="back-button hidden" id="backBtn" onclick="previousSlide()">â† ZurÃ¼ck</button>

    <!-- Image Zoom Modal -->
    <div id="imageModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImage">
        <div id="caption"></div>
    </div>

    <!-- Curtain Transition Effect -->
    <div id="curtainLeft" class="curtain left"></div>
    <div id="curtainRight" class="curtain right"></div>

<div class="container">
    <!-- Slide 0: Authentication -->
    <div class="slide active" data-slide="0">
        <div class="emoji-large">ğŸ”</div>
        <h1>Willkommen!</h1>
        <p style="font-size: 1.4rem; margin: 40px 0;">
            Diese Geschichte ist speziell fÃ¼r dich...
        </p>
        <p style="margin-top: 50px; font-size: 1.1rem; color: #764ba2;">
            Klick auf den Button, wenn du Sushana Y. bist ğŸ’•
        </p>
        <div class="button-group" style="margin-top: 60px;">
            <button onclick="authenticate()">Ja, ich bin es ğŸ’«</button>
        </div>
    </div>

    <!-- Slide 1: Secret Question -->
    <div class="slide" data-slide="1">
        <div class="emoji-large">ğŸ”‘</div>
        <h1>Eine geheime Frage...</h1>
        <p style="font-size: 1.2rem; margin: 40px 0; color: #764ba2;">
            Nur du kennst die Antwort ğŸ’•
        </p>
        <p style="font-size: 1.1rem; margin: 30px 0;">
            <b>Unser 1. Jahrestag war wann?</b><br>
            (Bitte im Format: DD.MM.YYYY eingeben)
        </p>
        <div style="margin: 40px 0;">
            <input type="text" id="passwordInput" placeholder="z.B. 31.12.9999" style="padding: 12px; font-size: 1.1rem; text-align: center; border: 2px solid #e60073; border-radius: 8px; width: 250px;">
        </div>
        <div class="button-group" style="margin-top: 60px;">
            <button onclick="verifyPassword()">BestÃ¤tigen ğŸ’«</button>
        </div>
        <p id="passwordError" style="color: #e60073; font-weight: bold; margin-top: 20px; display: none;">
            Das ist nicht korrekt! Versuche es nochmal â¤ï¸
        </p>
    </div>

    <!-- Slide 2: Welcome -->
    <div class="slide" data-slide="2">
        <div class="emoji-large">ğŸ’•</div>
        <h1>Hallo Bby</h1>
        <p style="font-size: 1.6rem; margin: 40px 0;">
            Willkommen zu unserer Geschichteâ€¦<br><br>
            <span style="color: #e60073; font-weight: 700;">Du bist das Beste, das mir je passiert ist</span>
        </p>
        <p style="margin-top: 50px; font-size: 1.2rem; color: #764ba2;">
            Lass dich Ã¼berraschen und klick dich durch unsere gemeinsamen Momente ğŸŒ¹
        </p>
        <div class="button-group" style="margin-top: 60px;">
            <button onclick="transitionWithCurtain()">Unsere Geschichte beginnt ğŸ’•</button>
        </div>
    </div>

    <!-- Slide 3: Intro -->
    <div class="slide" data-slide="3">
        <img src="images/1.jpeg" alt="Unsere Geschichte" class="slide-image">
        <div class="emoji-large">â¤ï¸</div>
        <h1>Unsere Geschichte</h1>
        <p>Eine Reise voller Liebe, Lachen und unvergesslicher Momente</p>
        <div class="button-group">
            <button onclick="nextSlide()">Beginnen ğŸš€</button>
        </div>
    </div>

    <!-- Slide 4: The Beginning -->
    <div class="slide" data-slide="4">
        <img src="images/OIP.webp" alt="Unsere Geschichte" class="slide-image">
        <div class="emoji-large">ğŸ“±</div>
        <h2>Der Anfang</h2>
        <p>
            Alles begann auf der App <b>Hoop</b>.<br><br>
            Ich weiss, du sprichst nicht gerne Ã¼ber diese App, aber sie war tatsÃ¤chlich der Anfang von allem.<br>
            Was erst eine einfache, langeweile-vertreibende Nachricht war, wurde schnell zu endlosen GesprÃ¤chen.<br>
            Dann zu nÃ¤chtlichen Anrufen Ã¼ber Snapchat.<br>
            Zu Stunden, in denen die Welt um uns herum einfach verschwand.<br><br>
            Jede Nachricht war ein Funke.<br>
            Jeder Anruf ein neues Kapitel unserer Geschichte.
        </p>
        <div class="button-group">
            <button class="button-secondary" onclick="previousSlide()">â† ZurÃ¼ck</button>
            <button onclick="nextSlide()">Weiter â†’</button>
        </div>
    </div>

    <!-- Slide 5: Valentine's Day -->
    <div class="slide" data-slide="5">
        <img src="images/2.jpeg" alt="Unsere Geschichte" class="slide-image">
        <div class="emoji-large">ğŸ’</div>
        <h2>1. Valentinstag & Das MilitÃ¤r</h2>
        <p>
            Dann kam das MilitÃ¤râ€¦<br><br>
            Ausgerechnet am gleichen Tag, an dem ich es antreten musste, war Valentinstag vor genau 4 Jahren.<br>
            Aber ich wollte trotzdem, dir eine Freude machen: <b>Ich schickte dir zum allerersten Mal Blumen und somit auch einen Teil meiner Liebe zu dir</b>.<br><br>
            Nach einer Woche MilitÃ¤r bekam ich endlich Ausgang.<br>
            Und statt zu schlafen: Wir traffen uns zum ersten Mal!<br><br>
            <b>Von 23 Uhr bis 5 Uhr morgens</b> durchstreiften wir <b>Dornach</b>.<br>
            Kein Plan. Keine Route. Nur wir zwei. Und .. viel Liebe.<br>
            Der Mond Ã¼ber uns, die Welt nur fÃ¼r uns.
        </p>
        <div class="button-group">
            <button class="button-secondary" onclick="previousSlide()">â† ZurÃ¼ck</button>
            <button onclick="nextSlide()">Weiter â†’</button>
        </div>
    </div>

    <!-- Slide 6: Growing Together -->
    <div class="slide" data-slide="6">
        <img src="images/3.jpeg" alt="Unsere Geschichte" class="slide-image">
        <div class="emoji-large">âœ¨</div>
        <h2>Unser erstes Abenteuer</h2>
        <p>
            <b>Das erste Tattoo.</b><br>
            Ein Symbol fÃ¼r uns, fÃ¼r den Anfang unserer gemeinsamen Geschichte.<br><br>
            Dann lerntest du <b>meine Schwester</b> kennen.<br>
            Danach meine <b>Mutter</b>.<br><br>
            Und beim <b>Gender Reveal deiner Schwester</b> lernte ich <br>
            deine ganze <b>Familie kennen</b>.<br><br>
            Nebenher verbanden wir unsere <b>Freundeskreise</b>.<br>
            Das war der Moment, in dem wir keine zwei Welten mehr waren.<br>
            Wir wurden eine.
        </p>
        <div class="button-group">
            <button class="button-secondary" onclick="previousSlide()">â† ZurÃ¼ck</button>
            <button onclick="nextSlide()">Weiter â†’</button>
        </div>
    </div>


    <!-- Slide 7: Adventures -->
    <div class="slide" data-slide="7">
        <img src="images/4.jpeg" alt="Unsere Geschichte" class="slide-image">
        <div class="emoji-large">ğŸŒ</div>
        <h2>Die Welt erkunden zusammen</h2>
        <p>
            Und dann <b>begannen die Reisen</b>.<br><br>
            <b>Cagliari</b> â€¢ <b>Amsterdam</b> â€¢ <b>Mallorca</b><br>
            <b>Barcelona</b> â€¢ <b>Kreta</b> â€¢ <b>Nizza</b><br>
            <b>Frankfurt</b> â€¢ <b>Monaco</b> â€¢ <b>Gran Canaria</b><br>
            <b>Benidorm</b> â€¢ <b>Strassburg</b><br><br>
            So viele Orte, so viele Erinnerungen.<br>
            Neue Kulturen, neue Abenteuer, neue Momente.<br><br>
            Aber weisst du was?<br>
            Der schÃ¶nste Ort war immer dort, wo du bei mir warst.
        </p>
        <div class="button-group">
            <button class="button-secondary" onclick="previousSlide()">â† ZurÃ¼ck</button>
            <button onclick="nextSlide()">Weiter â†’</button>
        </div>
    </div>

    <!-- Slide 8: Photo Gallery -->
    <div class="slide" data-slide="8">
        <div class="emoji-large">ğŸ“¸</div>
        <h2>Unsere schÃ¶nsten Momente</h2>
        <div class="photo-gallery">
            <div class="photo-container">
                <img src="images/5.jpeg" alt="Unsere Geschichte" class="gallery-photo">
            </div>
            <div class="photo-container">
                <img src="images/6.jpeg" alt="Unsere Geschichte" class="gallery-photo">
            </div>
        </div>
        <p style="margin-top: 20px; font-size: 1.1rem;">Diese Momente machen unsere Geschichte unvergesslich â¤ï¸</p>
        <div class="button-group">
            <button class="button-secondary" onclick="previousSlide()">â† ZurÃ¼ck</button>
            <button onclick="nextSlide()">Weiter â†’</button>
        </div>
    </div>

    <!-- Slide 9: Four Years Later -->
    <div class="slide" data-slide="9">
        <img src="images/7.jpeg" alt="Unsere Geschichte" class="slide-image">
        <div class="emoji-large">ğŸ’•</div>
        <h2>Vier Jahre spÃ¤ter</h2>
        <p>
            Vier Valentinstage voller <b>Erinnerungen, Lachen und Liebe</b>.<br><br>
            Und wenn ich zurÃ¼ckblicke,<br>
            sehe ich keinen Zufall mehr.<br><br>
            <b>Ich sehe uns.</b>
        </p>
        <div class="button-group">
            <button class="button-secondary" onclick="previousSlide()">â† ZurÃ¼ck</button>
            <button onclick="nextSlide()">Finale â†’</button>
        </div>
    </div>

    <!-- Slide 10: The Question -->
    <div class="slide" data-slide="10">
        <img src="images/val.jpg" alt="Unsere Geschichte" class="slide-image">
        <div class="emoji-large">ğŸŒ¹</div>
        <div class="emoji-large">ğŸŒ¹</div>
        <h1>4. Gemeinsamer Valentinstagâ€¦</h1>
        <p>Nach all diesen wundervollen Momenten mÃ¶chte ich dir etwas sagen:</p>
        <div class="button-group">
            <button class="button-secondary" onclick="previousSlide()">â† ZurÃ¼ck</button>
            <button onclick="showFinal()"> Klick !ğŸ’–</button>
        </div>
        <div id="final-message"></div>
    </div>
</div>

<script>
    let currentSlide = 0;
    const totalSlides = document.querySelectorAll('.slide').length;
    document.getElementById('total-slides').textContent = totalSlides;

    function authenticate() {
        // Just proceed to the next slide
        nextSlide();
    }

    // Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyA72lo6O4E2SWFj0fqJ5mRBFMGWIB3dGi8",
        authDomain: "valentine26-ks.firebaseapp.com",
        databaseURL: "https://valentine26-ks-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "valentine26-ks",
        storageBucket: "valentine26-ks.firebasestorage.app",
        messagingSenderId: "108920581112",
        appId: "1:108920581112:web:9bc642ce4f025c9d1ac40d",
        measurementId: "G-6LF7BYS19M"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Sichere Hash-Funktion (SHA-256)
    async function hashPassword(password) {
        const encoder = new TextEncoder();
        const data = encoder.encode(password);
        const hashBuffer = await crypto.subtle.digest('SHA-256', data);
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        return hashHex;
    }

    function verifyPassword() {
        const input = document.getElementById('passwordInput').value.trim();
        const errorMsg = document.getElementById('passwordError');

        // Einfache direkte Passwort-PrÃ¼fung
        if (input === "08.02.2022") {
            // Correct password
            errorMsg.style.display = 'none';
            document.getElementById('passwordInput').value = '';
            nextSlide();
        } else {
            // Wrong password
            errorMsg.style.display = 'block';
            document.getElementById('passwordInput').value = '';
        }
    }

    function showSlide(n) {
        const slides = document.querySelectorAll('.slide');
        const backBtn = document.getElementById('backBtn');

        if (n >= totalSlides) {
            currentSlide = totalSlides - 1;
        }
        if (n < 0) {
            currentSlide = 0;
        }

        slides.forEach(slide => slide.classList.remove('active'));
        slides[currentSlide].classList.add('active');

        document.getElementById('current-slide').textContent = currentSlide + 1;

        // Back button visibility
        if (currentSlide === 0) {
            backBtn.classList.add('hidden');
        } else {
            backBtn.classList.remove('hidden');
        }

        // Scroll to top
        window.scrollTo(0, 0);
    }

    function nextSlide() {
        currentSlide++;
        showSlide(currentSlide);
    }

    function previousSlide() {
        currentSlide--;
        showSlide(currentSlide);
    }

    function transitionWithCurtain() {
        const curtainLeft = document.getElementById('curtainLeft');
        const curtainRight = document.getElementById('curtainRight');

        if (!curtainLeft || !curtainRight) {
            nextSlide();
            return;
        }

        // Show curtains
        curtainLeft.classList.add('active');
        curtainRight.classList.add('active');

        // After animation, change slide and hide curtains
        setTimeout(() => {
            currentSlide++;
            showSlide(currentSlide);

            // Remove active class and hide curtains
            curtainLeft.classList.remove('active');
            curtainRight.classList.remove('active');
        }, 2000);
    }

    function showFinal() {
        const answer = prompt("Wie sehr liebst du mich von 1-10? ğŸ’•");

        if (answer === null || answer === "") {
            return;
        }

        const num = parseInt(answer.trim());

        if (isNaN(num)) {
            alert("âŒ Bitte gib eine Zahl ein! ğŸ’”");
            return;
        }

        if (num < 10) {
            alert("âŒ Das ist nicht akzeptabel! ğŸ’”");
            return;
        }
        else if (num > 10) {
            alert("ğŸ˜‚ Das ist Ã¼bertrieben! Aber ich liebe dich auch so fest! ğŸ’–");
        }

        // Disable the button
        event.target.disabled = true;
        event.target.style.opacity = "0.5";
        event.target.style.cursor = "not-allowed";

        displayLetter();
    }

    function displayLetter() {
        const finalMsg = document.getElementById('final-message');

        finalMsg.innerHTML = `
            <div class="letter-container">
                <div class="letter" id="letterToClick">
                    <div class="letter-top"></div>
                    <div class="envelope-label">FÃ¼r mein Bby ğŸ’•</div>
                    <div class="letter-content">
                        <p class="final-text">Ich liebe dich und ich kann glÃ¼cklich sein, dich zum bereits 4. Mal als meinen Valentine Bby zu nennen! ğŸŒ¹</p>
                        <p class="final-text">Du bist mein grÃ¶sstes GlÃ¼ck, mein Abenteuer und mein Zuhause. Danke, dass du jeden Tag von mir schÃ¶n machst. â¤ï¸</p>
                    </div>
                </div>
            </div>
        `;

        // Automatisch nach unten scrollen zum Brief
        setTimeout(() => {
            const letterElement = document.getElementById('letterToClick');
            letterElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 100);

        // Make letter clickable to open
        const letterElement = document.getElementById('letterToClick');
        const letterTop = letterElement.querySelector('.letter-top');
        const letterContent = letterElement.querySelector('.letter-content');

        letterElement.style.cursor = 'pointer';
        letterElement.classList.add('closed');

        letterElement.addEventListener('click', function() {
            letterTop.classList.add('opening');
            letterContent.classList.add('opening');
            letterElement.classList.remove('closed');
            letterElement.style.cursor = 'default';

            // Start hearts after letter opens
            setTimeout(() => {
                createHearts();
            }, 2000);
        });
    }

    function createHearts() {
        for (let i = 0; i < 20; i++) {
            setTimeout(() => {
                const heart = document.createElement("div");
                heart.className = "heart";
                heart.innerHTML = "â¤";
                heart.style.left = Math.random() * 100 + "vw";
                heart.style.animationDuration = (3 + Math.random() * 3) + "s";
                heart.style.animationDelay = "0s";
                document.body.appendChild(heart);
            }, i * 50);
        }
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(event) {
        if (event.key === 'ArrowRight') nextSlide();
        if (event.key === 'ArrowLeft') previousSlide();
    });

    // Image Zoom Functionality
    const modal = document.getElementById("imageModal");
    const modalImg = document.getElementById("modalImage");
    const closeBtn = document.querySelector(".close");

    // Add zoom to all images
    function makeImageZoomable(img) {
        img.style.cursor = 'pointer';
        img.addEventListener('click', function() {
            modal.style.display = "block";
            modalImg.src = this.src;
            modalImg.alt = this.alt;
        });
    }

    // Get all slide images and gallery photos
    const allImages = document.querySelectorAll('.slide-image, .gallery-photo');
    allImages.forEach(img => makeImageZoomable(img));

    // Close modal on X click
    closeBtn.addEventListener('click', function() {
        modal.style.display = "none";
    });

    // Close modal on outside click
    modal.addEventListener('click', function(event) {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });

    // Close modal on Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === "Escape") {
            modal.style.display = "none";
        }
    });

    // Allow Enter key to verify password
    function setupPasswordInput() {
        const passwordInput = document.getElementById('passwordInput');
        if (passwordInput) {
            passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    verifyPassword();
                }
            });
        }
    }

    // Setup password input listener when the page loads
    setupPasswordInput();

    showSlide(currentSlide);
</script>

</body>
</html>
